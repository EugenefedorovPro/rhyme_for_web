### Теория рифмы

1. Рифмуются не буквы, а звуки. Каждое слово транскрибуруется по правилам Международного фонетического алфавита [IPA](https://tinyurl.com/59nmeuhb). Поэтому "Снится"(sʲɪˈnʲit͡sə)/ "синица"(ˈsʲnʲit͡sːə) - это близкая рифма. 
2. Для подбора рифм имеют значения: 
	- только ударный гласный. 
	- все звуки после него. 
	- согласный перед ним, если имеется. Например, в слове "колесо" алгоритм учитывает только [-со]. 
	- позиция звука, которая считается от ударного гласного. В паре "дом" / "ком", "о" - позиция 1, "д" и "к" занимают позицию 0, а звуки "м" позицию 2. 
3. Пара "облако" / "о'кала" имеют большинство одинаковых звуков, которые, однако, располагаются на разных позициях. Поэтому данная пара квалифицируется не как рифма, а как созвучие (ассонанс + консонанс).
4. Отношения между парами созвучных слов описываются рифмическими паттернами. Например, слова "рог" / "пирог" имеют следующий паттерн: ('same\_cons', 'same\_stressed', 'same\_cons').
4. В рифмованных словах звуки имеют свои созвучные пары, которые я обозначаю следующими символами:
	- **same\_cons** = тот же самый согласный на той же позиции в обоих словах: "дом" - "ком": "м" на позиции 2: ('any_cons', 'same_stressed', 'same_cons').
	- **same\_stressed\_v** = тот же самый ударный гласный "о" на позиции 1.
	- **near\_stressed\_v** = гласная и её йотированная пара как о - ё в словах "дом" - "проём": ('any_cons', 'near_stressed', 'same_cons'). 
	- **same\_v** = одинаковая гласная на соответствующих позициях, как 'а' в паре "кобра" - "вобла"; ('any_cons', 'same_stressed', 'same_cons', 'any_cons', 'same_v').
	- **voice** = звонкий/ глухой согласный, который соответствует глухому/ звонкому в другом слове: последние звуки пары "дрожь" - "вошь". 
	- palatal = мягкий/ твердый согласный, который соответствует твердому/ мягкому: "бо'ль" - "бейсбол"; ('same_cons', 'same_stressed', 'palat'). 
	- **any\_cons** = любой согласный на тех же позициях.
	- **any\_v** = любой гласный, например, последние звуки в паре "сло'во" - "лова"; ('same_cons', 'same_stressed', 'same_cons', 'same_v').
	- **no\_sound** = пропущенный звук на соответствующей позиции: "дом" - "дзюдо", 'м' - звук, пропущенный в конце второго слова: ('same\_cons', 'same\_stressed', 'no\_sound').
	- **add\_sound** = добавленный звук: в паре "дом" - "гнедому", звук 'у' добавлен: ('same\_cons', 'same\_stressed', 'same\_cons', 'add\_sound').
5. Степень рифмического соответствия - это континуум, в котором ухо само решает, где слова еще гармонируют друг с другом, а где уже нет. 
6. Каждому рифмованному слову присваивается штраф, который учитывает близость-дальность рифмический пар, описанных выше. Наибольший штраф снимается за добавление или пропуск звука, чуть меньший имеют any\_v, any\_cons, наименьший - за полное соответствие (same\_v, same\_cons). Средний штраф, соответственно, получают такие соотношения, как near\_stressed, voice, palatal:
	- **0** - "время"/ "бремя": ('same\_cons', 'same\_stressed', 'same\_cons', 'same\_v') - полное совпадение всех звуков, нулевой штраф. 
	- **1** - "конь"/ "огонь": ('voice', 'same\_stressed', 'same\_cons') - согласные перед ударным гласным соотносятся как глухой "к" и звонкий "г".
	- **5** - "вода"/ "воздал": ('same\_cons', 'same\_stressed', 'add\_sound') - в конце второго слова добавлен звук "л"; штраф существенно выше, и рифма уже звучит как более далекая.
	- **6** - "вода"/ "атак": ('voice', 'same\_stressed', 'add\_sound') - согласные предшествующие ударному гласному соотносятся как звонкий "д" - глухой "т", плюс ко второму слову добавлен звук ""к. Рифма достаточно далекая, соответственно и штраф большой.
7. Степень созвучия вычисляется по формуле, которая учитывает ряд факторов, прежде всего, наличие в слове ассонансов/ консонансов, а также длину слова. Если для расчёта рифмической дистанции между словами учитывается позиция звуков, то для созвучности это не имеет значение. Как следствие, наиболее интересные созвучия имеют далёкий балл рифмической несхожести и близкий балл в континууме ассонанс-консонанс.
	- **штраф: 11, созвучие: 1** - "беженец"/ "невеже" - ('any\_cons', 'same\_stressed', 'same\_cons', 'same\_v', 'no\_sound', 'no\_sound').
	- **штраф: 13, созвучие: 1** - "олово"/ "отлов" - ('any\_cons', 'same\_stressed', 'same\_cons', 'same\_v', 'no\_sound', 'no\_sound').

