### Теория рифмы

1. Рифмуются не буквы, а звуки. Каждое слово транскрибируется по правилам Международного фонетического алфавита [IPA](https://tinyurl.com/59nmeuhb). Поэтому "Снится"(sʲɪˈnʲit͡sə)/ "синица"(ˈsʲnʲit͡sːə) - это близкая рифма. 
2. Для подбора рифм имеют значение: 
	- ударный гласный. 
	- все звуки после него. 
	- согласный перед ним, если таковой в наличии. Например, в слове "колесо" алгоритм учитывает только [-со]. 
	- позиция звука, которая считается от ударного гласного. В паре "дом" / "ком", "о" - позиция 1, "д" и "к" занимают позицию 0, а звуки "м" позицию 2. 
3. Пара "облако" / "о'кала" имеет большинство одинаковых звуков, которые, однако, располагаются на разных позициях. Поэтому данная пара квалифицируется не как рифма, а как созвучие (ассонанс + консонанс).
4. Отношения между созвучными словами описываются рифмическими паттернами. Например, слова "рог", "пирог", "сырок", "урок" имеют один и тот же паттерн: ('same\_cons', 'same\_stressed', 'same\_cons').
5. В рифмованных словах звуки имеют свои созвучные пары, которые я обозначаю следующими символами:
	- **same\_cons** = тот же самый согласный на той же позиции в обоих словах: "дом" - "ком": "м" на позиции 2: ('any\_cons', 'same\_stressed', 'same\_cons').
	- **same\_stressed\_v** = тот же самый ударный гласный "о" на позиции 1.
	- **near\_stressed** = гласная и её йотированная пара, как о - ё в словах "дом" - "проём": ('any\_cons', 'near\_stressed', 'same\_cons'). 
	- **same\_v** = тождественная гласная на соответствующих позициях, как финальная 'а' в паре "кобра" - "вобла"; ('any\_cons', 'same\_stressed', 'same\_cons', 'any\_cons', 'same\_v').
	- **voice** = звонкий/ глухой согласный, который соответствует глухому/ звонкому в другом слове: например, "к" и "г" в паре "конь" - "огонь": ('voice', 'same\_stressed', 'same\_cons'). 
	- **palatal** = мягкий/ твердый согласный, который соответствует твердому/ мягкому: "боль" - "бейсбол"; ('same\_cons', 'same\_stressed', 'palat'). 
	- **any\_v** = любой гласный, например, последние звуки в паре "кепка" - "скрепку"; ('any\_cons', 'same\_stressed', 'same\_cons', 'same\_cons', 'any\_v').
	- **any\_cons** = любой согласный на тех же позициях: "конь" - "кот"; ('same\_cons', 'same\_stressed', 'any\_cons').
	- **no\_sound** = пропущенный звук на соответствующей позиции: "дом" - "дзюдо", 'м' - звук, пропущенный в конце второго слова: ('same\_cons', 'same\_stressed', 'no\_sound').
	- **add\_sound** = добавленный звук: в паре "дом" - "гнедому", звук 'у' добавлен: ('same\_cons', 'same\_stressed', 'same\_cons', 'add\_sound').
	- **add\_init\_cons** = звук, добавленный перед ударным гласным: "ом" - "альбом": ('add\_init\_cons', 'same\_stressed', 'same\_cons').
	- **no\_init\_cons** = звук, удалённый перед ударным гласным, пример, реверсивный предыдущему: "дом" - "ом": ('no\_init\_cons', 'same/_stressed', 'same\_cons')
6. Степень рифмического соответствия - это континуум, в котором ухо само решает, где слова еще гармонируют друг с другом, а где уже нет. 
7. Каждому рифмованному слову присваивается штраф, который учитывает близость-дальность рифмических пар, описанных выше. Наибольший штраф снимается за добавление или пропуск звука, чуть меньший - any\_v, any\_cons, наименьший - за полное соответствие (same\_v, same\_cons). Средний штраф, соответственно, получают такие соотношения, как near\_stressed, voice, palatal. Элемент паттерна add\_init\_cons и его реверс no\_init\_cons, при котором к ударному гласному добавляется/ отнимается предшествующий согласный, имеет особое значение - за него штраф дается, но минимальный.
	- **0** - "время"/ "бремя": ('same\_cons', 'same\_stressed', 'same\_cons', 'same\_v') - полное совпадение всех звуков, нулевой штраф. 
	- **1** - "конь"/ "огонь": ('voice', 'same\_stressed', 'same\_cons') - согласные перед ударным гласным соотносятся как глухой "к" и звонкий "г".
	- **5** - "вода"/ "воздал": ('same\_cons', 'same\_stressed', 'add\_sound') - в конце второго слова добавлен звук "л"; штраф существенно выше, и рифма уже звучит как более далёкая.
	- **6** - "вода"/ "атак": ('voice', 'same\_stressed', 'add\_sound') - согласные, предшествующие ударному гласному, соотносятся как звонкий "д" - глухой "т", плюс ко второму слову добавлен звук "к". Рифма достаточно далекая, соответственно и штраф большой.
	- **8** - "о'трок"/ "водок": ('add\_init\_cons', 'same\_stressed', 'voice', 'no\_sound', 'same\_v', 'same\_cons') - пара с ещё более далёкой рифмой, где большую роль играет уже не собственно рифмическая гравитация, а созвучность гласных и согласных в пределах целого слова. Добавлен согласный "в", предшествующий ударному гласному, "т" и "д" соотносятся как глухой/ звонкий, пропущен звук "р".
8. Степень созвучия вычисляется по формуле, которая учитывает ряд факторов, прежде всего, наличие в слове ассонансов/ консонансов, а также длину слова. Если для расчёта рифмической дистанции между словами во внимание берётся позиция звуков, то для созвучности это не имеет значения. Кроме того, алгоритм поиска рифм отсекает все звуки, которые предшествуют ударному гласному, и, если есть, предшествующему согласному, в то время как для поиска созвучий берётся всё слово целиком. Как следствие, наиболее интересные созвучия встречаются в словах, в которых ударение падает на дальний от конца слог, которые получают далёкий балл рифмической несхожести и близкий балл в континууме ассонанс-консонанс.
	- **штраф: 11, созвучность: 1** - "беженец"/ "невеже" - ('any\_cons', 'same\_stressed', 'same\_cons', 'same\_v', 'no\_sound', 'no\_sound').
	- **штраф: 13, созвучность: 1** - "олово"/ "отлов" - ('any\_cons', 'same\_stressed', 'same\_cons', 'same\_v', 'no\_sound', 'no\_sound').
	- **штраф - 11, созвучность - 1** - "творчество" / "отрочество" - ('add\_init\_cons', 'same\_stressed', 'no\_sound', 'same\_cons', 'no\_sound', 'same\_cons', 'same\_v', 'same\_cons', 'same\_cons', 'same\_cons', 'same\_v'). 

